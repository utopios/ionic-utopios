<!-- /**
 * Car Pool starter (https://store.enappd.com/product/carpool-app-starter-ionic)
 *
 * Copyright Â© 2019-present Enappd. All rights reserved.
 *
 * This source code is licensed as per the terms found in the
 * LICENSE.md file in the root directory of this source tree.
 */ -->
<ion-header>
  <ion-toolbar color="secondary">
    <ion-buttons slot="start">
      <ion-button slot="icon-only" (click)="closeModal()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Select Stopover</ion-title>
  </ion-toolbar>
</ion-header>


<ion-content class="ion-padding">
  <ion-item>
    <h1>Stop-overs</h1>
  </ion-item>
  <ion-searchbar placeholder="e.g Bangalore, Karnataka" class="background-transparent" [(ngModel)]="searchItem"
    showCancelButton="always" debounce="500" (ionFocus)="onFocus()" (ionChange)="searchOnChange()"
    (ionCancel)="onDismiss()" (ionBlur)="onBlur()" selected="true" autofocus="true">
  </ion-searchbar>

  <ion-card *ngIf="searchItem !== '' && showSearchResults">
    <ion-list style="box-shadow: 0 0px 6px #bdbdbd!important;">
      <ion-item *ngFor="let item of autocompleteItems" class="item-request-ride" button="true"
        (click)="chooseItem(item)">
        <ion-icon name="location-outline" slot="start" color="secondary"></ion-icon>
        <ion-label>
          <h2>{{item}}</h2>
        </ion-label>
      </ion-item>
    </ion-list>
  </ion-card>
  <ion-item class="item-request-ride" button="true" (click)="getCurrentLocation()">
    <ion-icon *ngIf="!usingGPS" name="location-outline" slot="start" color="secondary"></ion-icon>
    <ion-icon *ngIf="usingGPS" name="location" slot="start" color="secondary"></ion-icon>
    <ion-label>
      <h2>{{usingGPS?'Using':'Use'}} current location</h2>
    </ion-label>
  </ion-item>

  <agm-map *ngIf="showMap" [latitude]="location.latitude" [longitude]="location.longitude" [zoom]="zoom"
    [fullscreenControl]="true">
    <agm-marker [latitude]="location.latitude" [longitude]="location.longitude" [markerDraggable]="true"
      [animation]="'DROP'">
      <agm-info-window>
        <strong>Info Window content</strong>
      </agm-info-window>
    </agm-marker>
  </agm-map>
  <div class="map-gap">
  </div>
  <ion-grid *ngIf="address && address.value">
    <ion-row>
      <ion-col>
        <ion-text class="label-small">Stop Over Address</ion-text>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="10">
        <ion-text class="lighter">{{address.value}}</ion-text>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>
<ion-footer class="ion-padding">
  <ion-toolbar>
    <ion-button expand="block" color="secondary" type="submit" (click)="addStopOver()">Add Stop-over</ion-button>
  </ion-toolbar>
</ion-footer>